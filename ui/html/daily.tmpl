{{define "title"}}Daily Habits{{end}}

{{define "content"}}
<div class="flex flex-col md:flex-row">
    <!-- Side Nav (Slide-out for small screens) -->
    <aside class="w-full md:w-1/4 mb-4 md:mb-0 md:mr-6">
        <div class="bg-white p-4 rounded-lg shadow">
            <h3 class="text-lg font-semibold mb-2">Navigation</h3>
            <ul class="space-y-2">
                <li><a href="/" class="text-indigo-600 hover:underline">Home</a></li>
                <li><a href="/weekly" class="text-indigo-600 hover:underline">Weekly Habits</a></li>
            </ul>
        </div>
    </aside>

    <!-- Main Content -->
    <section class="flex-1">
        <h2 class="text-2xl font-bold mb-4">Daily Habits to Complete</h2>

        <!-- Progress Bar -->
        <div class="w-full bg-gray-200 rounded-full h-4 mb-6">
            <div class="bg-indigo-500 h-4 rounded-full" style="width: {{.Progress}}%;"></div>
        </div>

        <!-- New Habit Form -->
        <form method="POST" action="/daily/create" class="bg-white p-4 rounded-lg shadow mb-6 space-y-4">
            <div>
                <label for="name" class="block font-medium mb-1">New Habit</label>
                <input type="text" id="name" name="name" required class="w-full border border-gray-300 rounded px-3 py-2">
            </div>
            <button type="submit" class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded">Add Habit</button>
        </form>

        <!-- Habit List -->
        <div class="space-y-4">
            {{range .Habits}}
            <div class="bg-white p-4 rounded-lg shadow flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <input type="checkbox" {{if .Completed}}checked{{end}} hx-post="/daily/toggle/{{.ID}}" hx-swap="outerHTML" class="form-checkbox h-5 w-5 text-indigo-600">
                    <span class="{{if .Completed}}line-through text-gray-500{{end}}">{{.Name}}</span>
                </div>
                <div class="space-x-2">
                    <a href="/daily/edit/{{.ID}}" class="text-blue-500 hover:underline">Edit</a>
                    <form method="POST" action="/daily/delete/{{.ID}}" class="inline">
                        <button type="submit" class="text-red-500 hover:underline">Delete</button>
                    </form>
                </div>
            </div>
            {{else}}
            <p class="text-gray-600">No habits yet. Start by adding one!</p>
            {{end}}
        </div>
    </section>
</div>
{{end}}
